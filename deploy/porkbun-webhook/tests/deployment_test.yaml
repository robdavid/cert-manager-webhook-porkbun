suite: test deployment
templates:
  - deployment.yaml
tests:
  - it: should pass basic checks
    set:
      groupName: example.com
    asserts:
      - isKind:
          of: Deployment
      - matchSnapshot: {}
  - it: should support image tag override
    set:
      groupName: example.com
      image:
        tag: "v0.0.1"
    asserts:
      - isKind:
          of: Deployment
      - matchRegex:
          path: spec.template.spec.containers[?(@.name=="cert-manager-porkbun-webhook")].image
          pattern: ".*:v0.0.1$"
